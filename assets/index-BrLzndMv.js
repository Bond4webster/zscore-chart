import{j as c,L as v,R as x,a as g,C as j,X as y,Y as S,T as b,b as A,c as Z,r as P}from"./vendor-DKODaiiF.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(s){if(s.ep)return;s.ep=!0;const t=r(s);fetch(s.href,t)}})();const L=({active:e,payload:o,label:r})=>e&&o&&o.length?c.jsxs("div",{style:{backgroundColor:"#fff",padding:"10px",border:"1px solid #ccc"},children:[c.jsx("p",{children:r}),o.map((n,s)=>{const{name:t,payload:i}=n,{zScore:a,isAboveZScore:l,color:m,value:h}=i[t];return c.jsxs("p",{style:{color:m},children:[`${t}: ${h}`,c.jsx("br",{}),c.jsx("span",{style:{color:l?"red":"inherit"},children:`${t} Z-Score: ${a.toFixed(2)}`})]},`item-${s}`)})]}):null,C=e=>e.length===0?0:e.reduce((r,n)=>r+n,0)/e.length,D=(e,o)=>{if(e.length<=1)return 0;const n=e.map(s=>Math.pow(s-o,2)).reduce((s,t)=>s+t,0)/(e.length-1);return Math.sqrt(n)},f=e=>{const o=C(e),r=D(e,o);return r===0?e.map(()=>0):e.map(n=>(n-o)/r)},u=(e,o=1)=>Math.abs(e)>o,E=(e,o)=>{const r=[];let n=null;const s=t=>t/(e.length-1);return e.forEach((t,i)=>{n={offset:s(i),color:t?"red":o},r.push(n)}),r},p=(e,o,r,n)=>{const{cx:s,cy:t,index:i}=e,a=n[i][r],l=a.isAboveZScore;return c.jsx("circle",{cx:s,cy:t,r:o,fill:l?"red":a.color,stroke:"none"},i)},N=(e,o)=>e.map(r=>c.jsx(v,{type:"monotone",name:r,dataKey:n=>n[r].value,stroke:`url(#${r}Gradient)`,dot:n=>p(n,4,r,o),activeDot:n=>p(n,8,r,o),isAnimationActive:!1,connectNulls:!0},r)),O=(e,o)=>e.map(r=>{const n=o[0][r].color,s=E(o.map(t=>t[r].isAboveZScore),n);return c.jsx("defs",{children:c.jsx("linearGradient",{id:`${r}Gradient`,x1:"0",y1:"0",x2:"100%",y2:"0",children:s.map(t=>c.jsx("stop",{offset:t.offset*100+"%",stopColor:t.color},t.offset))})},r)}),$=({data:e,threshold:o=1})=>{const r=["uv","pv"];return c.jsxs("div",{style:{width:"100%",height:400},children:[c.jsxs("h2",{children:["Линейный график с выделением аномальных значений (|z-score| > ",o,")"]}),c.jsx(x,{children:c.jsxs(g,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[c.jsx(j,{strokeDasharray:"3 3"}),c.jsx(y,{dataKey:"name"}),c.jsx(S,{}),c.jsx(b,{content:c.jsx(L,{})}),c.jsx(A,{}),N(r,e),O(r,e)]})})]})},d=[{name:"Page A",uv:4e3,pv:2400},{name:"Page B",uv:3e3,pv:1398},{name:"Page C",uv:2e3,pv:9800},{name:"Page D",uv:2780,pv:3908},{name:"Page E",uv:1890,pv:4800},{name:"Page F",uv:2390,pv:3800},{name:"Page G",uv:3490,pv:4300}],G=d.map(e=>e.uv),M=d.map(e=>e.pv),z=f(G),q=f(M),R=d.map((e,o)=>{const{name:r,uv:n,pv:s}=e,t=z[o],i=q[o];return{name:r,uv:{value:n,zScore:t,isAboveZScore:u(t),color:"#8884d8"},pv:{value:s,zScore:i,isAboveZScore:u(i),color:"#82ca9d"}}}),w=()=>c.jsxs("div",{className:"App",style:{padding:"20px"},children:[c.jsx("h1",{children:"График с выделением z-score"}),c.jsx($,{data:R})]});Z.createRoot(document.getElementById("root")).render(c.jsx(P.StrictMode,{children:c.jsx(w,{})}));
